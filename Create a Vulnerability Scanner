pip install python-nmap


import nmap

scanner = nmap.PortScanner()

ip = input("Enter the IP address to scan: ")
print(f"Scanning {ip}...")

scanner.scan(ip, '1-1024', '-v')

for host in scanner.all_hosts():
    print(f"Host: {host} ({scanner[host].hostname()})")
    print(f"State: {scanner[host].state()}")
    for proto in scanner[host].all_protocols():
        print(f"Protocol: {proto}")
        ports = scanner[host][proto].keys()
        for port in ports:
            print(f"Port: {port} State: {scanner[host][proto][port]['state']}")
